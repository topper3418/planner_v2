import { Button, Card, Descriptions, Flex, Typography } from "antd"
import { useParams } from "react-router-dom";


const TicketDetails = ({
  ticket,
  loading,
  error,
  beginEdit
}) => {
  console.log("ticket:", ticket.due_date);
  console.log("type of due date:", typeof ticket.due_date);

  const { thingId } = useParams();
  return (
    <Card
      title="Ticket"
      loading={loading}
      extra={
        <Button
          type="primary"
          onClick={beginEdit} >Edit</Button>
      }
      style={{
        padding: '10px',
        width: '250px',
      }}
    >
      <Flex vertical gap="10px">
        <Descriptions
          column={1}
          error={error}
          size="small">
          <Descriptions.Item label="Title">
            {ticket?.title}
          </Descriptions.Item>
          <Descriptions.Item label="Open">
            {ticket?.open ? 'Yes' : 'No'}
          </Descriptions.Item>
          <Descriptions.Item label="category">
            {ticket?.category ? ticket.category.name : 'Uncategorized'}
          </Descriptions.Item>
          {!thingId &&
            <Descriptions.Item label="Thing">
              {ticket?.thing ? ticket.thing.name : 'No thing'}
            </Descriptions.Item>}
          <Descriptions.Item label="User">
            {ticket?.user?.username ? ticket.user.username : ''}
          </Descriptions.Item>
          <Descriptions.Item label="Schedule">
            {ticket?.schedule ? ticket.schedule.name : ''}
          </Descriptions.Item>
          <Descriptions.Item label="Due Date">
            {ticket?.due_date ? ticket.due_date : ''}
          </Descriptions.Item>
          <Typography.Paragraph style={{
            border: '1px solid #f0f0f0',
            padding: '10px',
            borderRadius: '5px'
          }}>
            {ticket?.description ? ticket.description : ''}
          </Typography.Paragraph>
        </Descriptions>
      </Flex>
    </Card >
  )
}

export default TicketDetails;
